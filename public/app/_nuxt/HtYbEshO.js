import{_ as me,d as pe,r as C,b as A,o,w as O,e as S,c as f,f as b,n as u,g as h,m as G,h as k,i as ee,T as ve,F as he,j as Me,k as ne,l as Ie,t as R,p as X,q as ae,u as Y,s as T,v as t,x as Ce,y as Ae,z as Oe,A as Se,B as Z,C as ke,D as q,E as y,G as qe,H as _,I as ze,J as x,K as Be,L as Ve,M as we}from"#entry";import{i as He,r as je,u as $e,n as Ne,l as Ue}from"./CEBnf4lY.js";import{s as Fe}from"./DpB_hE1g.js";import{u as Ee}from"./CGL4pY6L.js";import{u as Le}from"./BSWBmhT_.js";const c=ae(y.ui.strategy,y.ui.input,Be),Q=ae(y.ui.strategy,y.ui.inputMenu,Ve),De=pe({components:{HCombobox:Ue,HComboboxButton:Ne,HComboboxOptions:$e,HComboboxOption:je,HComboboxInput:He,UIcon:ee,UAvatar:ne},inheritAttrs:!1,props:{modelValue:{type:[String,Number,Object,Array],default:""},query:{type:String,default:null},by:{type:String,default:void 0},options:{type:Array,default:()=>[]},id:{type:String,default:null},name:{type:String,default:null},required:{type:Boolean,default:!1},icon:{type:String,default:null},loadingIcon:{type:String,default:()=>c.default.loadingIcon},leadingIcon:{type:String,default:null},trailingIcon:{type:String,default:()=>Q.default.trailingIcon},trailing:{type:Boolean,default:!1},leading:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},selectedIcon:{type:String,default:()=>Q.default.selectedIcon},disabled:{type:Boolean,default:!1},nullable:{type:Boolean,default:!1},placeholder:{type:String,default:null},padded:{type:Boolean,default:!0},size:{type:String,default:null,validator(e){return Object.keys(c.size).includes(e)}},color:{type:String,default:()=>c.default.color,validator(e){return[...y.ui.colors,...Object.keys(c.color)].includes(e)}},variant:{type:String,default:()=>c.default.variant,validator(e){return[...Object.keys(c.variant),...Object.values(c.color).flatMap(g=>Object.keys(g))].includes(e)}},optionAttribute:{type:String,default:"label"},valueAttribute:{type:String,default:null},search:{type:Function,default:void 0},searchAttributes:{type:Array,default:null},searchLazy:{type:Boolean,default:!1},debounce:{type:Number,default:200},popper:{type:Object,default:()=>({})},inputClass:{type:String,default:null},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})},uiMenu:{type:Object,default:()=>({})}},emits:["update:modelValue","update:query","open","close","change"],setup(e,{emit:g,slots:w}){const{ui:a,attrs:W}=Y("input",T(e,"ui"),c,T(e,"class")),{ui:H}=Y("inputMenu",T(e,"uiMenu"),Q),z=t(()=>Ce({},e.popper,H.value.popper)),[m,B]=Ee(z.value),{size:j,rounded:$}=Ae({ui:a,props:e}),{emitFormBlur:N,emitFormChange:U,inputId:F,color:l,size:E,name:M}=Le(e,c),r=t(()=>j.value??E.value),I=t(()=>{if(!e.by)return;if(typeof e.by=="function")return e.by;const n=e.by;return n.indexOf(".")>0?(i,s)=>v(i,n)===v(s,n):n}),J=Oe(""),p=t({get(){return e.query??J.value},set(n){J.value=n,g("update:query",n)}});function P(n){return!Array.isArray(n)&&n!==null&&typeof n=="object"}const le=t(()=>{if(!e.modelValue)return null;function n(i){return e.valueAttribute?v(i,e.valueAttribute):i}function d(i,s){return I.value&&typeof I.value!="function"&&P(i)&&P(s)?Z(i[e.by],s[e.by]):Z(i,s)}if(e.valueAttribute){const i=D.value.find(s=>{const ye=n(s);return d(ye,e.modelValue)});return i?v(i,e.optionAttribute):null}else return["string","number"].includes(typeof e.modelValue)?e.modelValue:v(e.modelValue,e.optionAttribute)}),ue=t(()=>{const n=a.value.color?.[l.value]?.[e.variant]||a.value.variant[e.variant];return ke(q(a.value.base,a.value.form,$.value,a.value.placeholder,a.value.size[r.value],e.padded?a.value.padding[r.value]:"p-0",n?.replaceAll("{color}",l.value),(V.value||w.leading)&&a.value.leading.padding[r.value],(K.value||w.trailing)&&a.value.trailing.padding[r.value]),e.inputClass)}),V=t(()=>e.icon&&e.leading||e.icon&&!e.trailing||e.loading&&!e.trailing||e.leadingIcon),K=t(()=>e.icon&&e.trailing||e.loading&&e.trailing||e.trailingIcon),te=t(()=>e.loading?e.loadingIcon:e.leadingIcon||e.icon),ie=t(()=>e.loading&&!V.value?e.loadingIcon:e.trailingIcon||e.icon),oe=t(()=>q(a.value.icon.leading.wrapper,a.value.icon.leading.pointer,a.value.icon.leading.padding[r.value])),re=t(()=>q(a.value.icon.base,l.value&&y.ui.colors.includes(l.value)&&a.value.icon.color.replaceAll("{color}",l.value),a.value.icon.size[r.value],e.loading&&a.value.icon.loading)),se=t(()=>q(a.value.icon.trailing.wrapper,a.value.icon.trailing.padding[r.value])),de=t(()=>q(a.value.icon.base,l.value&&y.ui.colors.includes(l.value)&&a.value.icon.color.replaceAll("{color}",l.value),a.value.icon.size[r.value],e.loading&&!V.value&&a.value.icon.loading)),L=e.search&&typeof e.search=="function"?qe(e.search,e.debounce):void 0,D=Se(async()=>L?await L(p.value):e.options||[],[],{lazy:e.searchLazy});function ce(n){return n.replace(/[.*+?^${}()|[\]\\]/g,d=>`\\${d}`)}const ge=t(()=>{if(!p.value||L)return D.value;const n=ce(p.value);return D.value.filter(d=>(e.searchAttributes?.length?e.searchAttributes:[e.optionAttribute]).some(i=>{if(["string","number"].includes(typeof d))return String(d).search(new RegExp(n,"i"))!==-1;const s=_(d,i);return s!=null&&String(s).search(new RegExp(n,"i"))!==-1}))});ze(B,n=>{n?g("open"):(g("close"),N())});function fe(n){p.value="",x(e.modelValue)!==x(n)&&(g("update:modelValue",n),g("change",n),U())}function v(n,d){return _(n,d)}function be(n){p.value=n.target.value}return Fe(()=>we()),{ui:a,uiMenu:H,attrs:W,name:M,inputId:F,popper:z,trigger:m,container:B,label:le,isLeading:V,isTrailing:K,inputClass:ue,leadingIconName:te,leadingIconClass:re,leadingWrapperIconClass:oe,trailingIconName:ie,trailingIconClass:de,trailingWrapperIconClass:se,filteredOptions:ge,query:p,accessor:v,onUpdate:fe,onQueryChange:be,by:I}}}),Ge={class:"truncate"};function Re(e,g,w,a,W,H){const z=C("HComboboxInput"),m=ee,B=C("HComboboxButton"),j=ne,$=C("HComboboxOption"),N=C("HComboboxOptions"),U=C("HCombobox");return o(),A(U,{by:e.by,name:e.name,"model-value":e.modelValue,disabled:e.disabled,nullable:e.nullable,as:"div",class:u(e.ui.wrapper),"onUpdate:modelValue":e.onUpdate},{default:O(({open:F})=>[S("div",{class:u(e.uiMenu.trigger)},[h(z,G({id:e.inputId,name:e.name,required:e.required,placeholder:e.placeholder,disabled:e.disabled,class:e.inputClass,autocomplete:"off"},e.attrs,{"display-value":()=>e.query?e.query:e.label,onChange:e.onQueryChange}),null,16,["id","name","required","placeholder","disabled","class","display-value","onChange"]),e.isLeading&&e.leadingIconName||e.$slots.leading?(o(),f("span",{key:0,class:u(e.leadingWrapperIconClass)},[k(e.$slots,"leading",{disabled:e.disabled,loading:e.loading},()=>[h(m,{name:e.leadingIconName,class:u(e.leadingIconClass)},null,8,["name","class"])])],2)):b("",!0),e.isTrailing&&e.trailingIconName||e.$slots.trailing?(o(),A(B,{key:1,ref:"trigger",class:u(e.trailingWrapperIconClass)},{default:O(()=>[k(e.$slots,"trailing",{disabled:e.disabled,loading:e.loading},()=>[h(m,{name:e.trailingIconName,class:u(e.trailingIconClass)},null,8,["name","class"])])]),_:3},8,["class"])):b("",!0)],2),F?(o(),f("div",{key:0,ref:"container",class:u([e.uiMenu.container,e.uiMenu.width])},[h(ve,G({appear:""},e.uiMenu.transition),{default:O(()=>[S("div",null,[e.popper.arrow?(o(),f("div",{key:0,"data-popper-arrow":"",class:u(Object.values(e.uiMenu.arrow))},null,2)):b("",!0),h(N,{static:"",class:u([e.uiMenu.base,e.uiMenu.ring,e.uiMenu.rounded,e.uiMenu.shadow,e.uiMenu.background,e.uiMenu.padding,e.uiMenu.height])},{default:O(()=>[(o(!0),f(he,null,Me(e.filteredOptions,(l,E)=>(o(),A($,{key:E,as:"template",value:e.valueAttribute?e.accessor(l,e.valueAttribute):l,disabled:l.disabled},{default:O(({active:M,selected:r,disabled:I})=>[S("li",{class:u([e.uiMenu.option.base,e.uiMenu.option.rounded,e.uiMenu.option.padding,e.uiMenu.option.size,e.uiMenu.option.color,M?e.uiMenu.option.active:e.uiMenu.option.inactive,r&&e.uiMenu.option.selected,I&&e.uiMenu.option.disabled])},[S("div",{class:u(e.uiMenu.option.container)},[k(e.$slots,"option",{option:l,active:M,selected:r},()=>[l.icon?(o(),A(m,{key:0,name:l.icon,class:u([e.uiMenu.option.icon.base,M?e.uiMenu.option.icon.active:e.uiMenu.option.icon.inactive,l.iconClass]),"aria-hidden":"true"},null,8,["name","class"])):l.avatar?(o(),A(j,G({key:1,ref_for:!0},{size:e.uiMenu.option.avatar.size,...l.avatar},{class:e.uiMenu.option.avatar.base,"aria-hidden":"true"}),null,16,["class"])):l.chip?(o(),f("span",{key:2,class:u(e.uiMenu.option.chip.base),style:Ie({background:`#${l.chip}`})},null,6)):b("",!0),S("span",Ge,R(["string","number"].includes(typeof l)?l:e.accessor(l,e.optionAttribute)),1)])],2),r?(o(),f("span",{key:0,class:u([e.uiMenu.option.selectedIcon.wrapper,e.uiMenu.option.selectedIcon.padding])},[h(m,{name:e.selectedIcon,class:u(e.uiMenu.option.selectedIcon.base),"aria-hidden":"true"},null,8,["name","class"])],2)):b("",!0)],2)]),_:2},1032,["value","disabled"]))),128)),e.query&&!e.filteredOptions.length?(o(),f("p",{key:0,class:u(e.uiMenu.option.empty)},[k(e.$slots,"option-empty",{query:e.query},()=>[X(R(e.uiMenu.default.optionEmpty.label.replace("{query}",e.query)),1)])],2)):e.filteredOptions.length?b("",!0):(o(),f("p",{key:1,class:u(e.uiMenu.empty)},[k(e.$slots,"empty",{query:e.query},()=>[X(R(e.uiMenu.default.empty.label),1)])],2))]),_:3},8,["class"])])]),_:3},16)],2)):b("",!0)]),_:3},8,["by","name","model-value","disabled","nullable","class","onUpdate:modelValue"])}const Ke=Object.assign(me(De,[["render",Re]]),{__name:"UInputMenu"});export{Ke as _};
