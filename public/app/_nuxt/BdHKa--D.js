import{v as w,a4 as E,z as o}from"#entry";import{u as $}from"./bPUzXHqf.js";import{u as B,a as P}from"./BHpSMavt.js";function U(){const n=$(),{apiUrl:d}=B(),i="contestants",r=w(()=>d(i));return{fetchContestantsApi:async t=>await n(`${r.value}?${t.toString()}`),fetchContestantApi:async t=>await n(`${r.value}/${t}`),addContestantApi:async t=>await n(`${r.value}`,{method:"POST",body:t}),updateContestantApi:async(t,c)=>await n(`${r.value}/${t}`,{method:"PUT",body:c}),deleteContestantApi:async t=>await n(`${r.value}/${t}`,{method:"DELETE"})}}const N=E("contestants",()=>{const{fetchContestantsApi:n,addContestantApi:d,updateContestantApi:i,deleteContestantApi:r}=U(),{hasError:y,errorBag:m,transformValidationErrors:u,resetErrorBag:l}=P();let p;(a=>{a.ASC="asc",a.DESC="desc"})(p||(p={}));const t=o([]),c=o(!1),h=o(1),f=o(5),A=o(""),S=o(""),C=o({column:"created_at",direction:"desc"}),v=o(0);return{contestants:t,loading:c,hasError:y,errorBag:m,page:h,pageCount:f,search:A,selectedStatus:S,sort:C,totalContestants:v,fetchContestants:async()=>{c.value=!0,l();try{const a=new URLSearchParams({page:h.value.toString(),per_page:f.value.toString(),sort:C.value.column,order:C.value.direction,search:A.value}),e=await n(a);t.value=e.data??e,console.log(t.value),v.value=Number(e.meta.total)||0}catch(a){u(a)}finally{c.value=!1}},fetchContestantsByEvent:async a=>{c.value=!0,l();try{const e=new URLSearchParams({event_id:a.toString(),per_page:"999"}),s=await n(e);t.value=s.data??s,console.log(t.value),v.value=Number(s.meta.total)||0}catch(e){u(e)}finally{c.value=!1}},addContestant:async a=>{l();try{const e=await d(a);t.value.push(e.data??e)}catch(e){u(e)}},updateContestantById:async(a,e)=>{l();try{const s=await i(a,e);t.value=t.value.map(g=>g.id===a?s.data??s:g)}catch(s){u(s)}},deleteContestantById:async a=>{l();try{await r(a),t.value=t.value.filter(e=>e.id!==a)}catch(e){u(e)}}}});export{N as u};
