import{_ as j,a as O,b as K}from"./CEBnf4lY.js";import{m as L}from"./CftXmbaa.js";import{d as R,$ as k,z as $,v as x,b as z,o as F,w as c,g as o,a2 as A,X as e,ak as B,a3 as H,p as Y,a6 as Q,Y as W,al as Z,I as D,c as ee}from"#entry";import{b as N}from"./BHpSMavt.js";import{u as te}from"./STx5ny5w.js";import{u as I}from"./2jTwVr-P.js";import{_ as G,a as q}from"./Bd0EK6v7.js";import{_ as P}from"./BSWBmhT_.js";import{C as oe,U as ae}from"./JlTjpy1D.js";import"./SZpBFCWL.js";import"./Btqvjtym.js";import"./BfYD3bRy.js";import"./C-0eX2IW.js";import"./CBJ2e7Ro.js";import"./CXA8dOOg.js";import"./bFcEm6fe.js";import"./D3Dcj_v8.js";import"./DpB_hE1g.js";import"./CGL4pY6L.js";import"./DpIK6lhX.js";import"./bPUzXHqf.js";import"./Bgk1oRip.js";const ne=R({__name:"CreateModal",props:{pageTitle:String},emits:["reloadTable","success","error","close"],setup(M,{emit:U}){const V=I(),{loading:h,errorBag:p,hasError:f}=k(V),l=U,t=M,{capitalizeAll:w}=N(),S=()=>l("close"),_=()=>{l("success"),l("reloadTable"),S()},b=()=>{l("error")},d=$({title:void 0,year:void 0,start_date:void 0,end_date:void 0}),r=x({get:()=>d.value.title,set:m=>{d.value.title=w(m)}}),y=x({get:()=>d.value.year,set:m=>{d.value.year=m}}),C=async m=>{if(console.log(m.data),await V.addEvent(m.data),f.value){b();return}_()};return(m,s)=>{const v=q,E=P,i=H,a=G,n=j;return F(),z(n,{"on-close":S,title:`Create ${t.pageTitle}`},{default:c(()=>[o(a,{schema:e(oe),state:e(d),onSubmit:A(C,["prevent"]),class:"space-y-6"},{default:c(()=>[o(E,{label:"Title",name:"title",error:e(p).title},{default:c(()=>[o(v,{modelValue:e(r),"onUpdate:modelValue":s[0]||(s[0]=u=>B(r)?r.value=u:null)},null,8,["modelValue"])]),_:1},8,["error"]),o(E,{label:"Year",name:"year",error:e(p).year},{default:c(()=>[o(v,{modelValue:e(y),"onUpdate:modelValue":s[1]||(s[1]=u=>B(y)?y.value=u:null)},null,8,["modelValue"])]),_:1},8,["error"]),o(E,{label:"Start Date",name:"start_date",error:e(p).start_date},{default:c(()=>[o(v,{modelValue:e(d).start_date,"onUpdate:modelValue":s[2]||(s[2]=u=>e(d).start_date=u),type:"date"},null,8,["modelValue"])]),_:1},8,["error"]),o(E,{label:"End Date",name:"end_date",error:e(p).end_date},{default:c(()=>[o(v,{modelValue:e(d).end_date,"onUpdate:modelValue":s[3]||(s[3]=u=>e(d).end_date=u),type:"date"},null,8,["modelValue"])]),_:1},8,["error"]),o(i,{type:"submit",loading:e(h)},{default:c(()=>[...s[4]||(s[4]=[Y(" Add ",-1)])]),_:1},8,["loading"])]),_:1},8,["schema","state"])]),_:1},8,["title"])}}}),le=Object.assign(ne,{__name:"EventsCreateModal"}),re=R({__name:"UpdateModal",props:{pageTitle:String,event:Object},emits:["reloadTable","success","error","noDataChange","close"],setup(M,{emit:U}){const V=I(),{loading:h,errorBag:p,hasError:f}=k(V),l=U,t=M,{capitalizeAll:w}=N(),S=()=>l("close"),_=()=>{l("success"),l("reloadTable"),S()},b=()=>{l("error")},d=()=>{l("noDataChange")},r=$({title:t.event?.title||void 0,year:t.event?.year||void 0,start_date:t.event?.start_date||void 0,end_date:t.event?.end_date||void 0}),y=$({...O.cloneDeep({title:t.event?.title||void 0,year:t.event?.year||void 0,start_date:t.event?.start_date||void 0,end_date:t.event?.end_date||void 0})}),C=["title","year","start_date","end_date"],m=x(()=>C.some(i=>{const a=r.value[i],n=y.value[i];return!O.isEqual(a,n)})),s=x({get:()=>r.value.title,set:i=>{r.value.title=w(i)}}),v=x({get:()=>r.value.year,set:i=>{r.value.year=i}}),E=async i=>{if(!m.value){d();return}if(await V.updateEventById(t.event?.id,i.data),f.value){b();return}_()};return(i,a)=>{const n=q,u=P,g=H,X=G,J=j;return F(),z(J,{"on-close":S,title:`Update ${t.pageTitle}`},{default:c(()=>[o(X,{schema:"UpdateEventValidationSchema"in i?i.UpdateEventValidationSchema:e(ae),state:e(r),onSubmit:A(E,["prevent"]),class:"space-y-6"},{default:c(()=>[o(u,{label:"Title",name:"title",error:e(p).title},{default:c(()=>[o(n,{modelValue:e(s),"onUpdate:modelValue":a[0]||(a[0]=T=>B(s)?s.value=T:null)},null,8,["modelValue"])]),_:1},8,["error"]),o(u,{label:"Year",name:"year",error:e(p).year},{default:c(()=>[o(n,{modelValue:e(v),"onUpdate:modelValue":a[1]||(a[1]=T=>B(v)?v.value=T:null)},null,8,["modelValue"])]),_:1},8,["error"]),o(u,{label:"Start Date",name:"start_date",error:e(p).start_date},{default:c(()=>[o(n,{modelValue:e(r).start_date,"onUpdate:modelValue":a[2]||(a[2]=T=>e(r).start_date=T),type:"date"},null,8,["modelValue"])]),_:1},8,["error"]),o(u,{label:"End Date",name:"end_date",error:e(p).end_date},{default:c(()=>[o(n,{modelValue:e(r).end_date,"onUpdate:modelValue":a[3]||(a[3]=T=>e(r).end_date=T),type:"date"},null,8,["modelValue"])]),_:1},8,["error"]),o(g,{type:"submit",loading:e(h),disabled:!e(m)},{default:c(()=>[...a[4]||(a[4]=[Y(" Update ",-1)])]),_:1},8,["loading","disabled"])]),_:1},8,["schema","state"])]),_:1},8,["title"])}}}),se=Object.assign(re,{__name:"EventsUpdateModal"}),De=R({__name:"index",setup(M){const U=Q();W({title:()=>U.meta.title});const{strSingular:V}=N(),h=V(U.meta.title),p=U.meta.title,f=Z(),{actionToastResult:l}=te(),t=I(),{events:w,loading:S,page:_,pageCount:b,search:d,sort:r,totalEvents:y,selectedStatus:C}=k(t),{columns:m,items:s,statusOptions:v}=L;t.fetchEvents();const E=()=>{f.open(le,{pageTitle:h,onReloadTable(){t.fetchEvents()},onSuccess(){l({icon:"i-heroicons-check-circle",description:"Event created.",id:"modal-success",color:"green"})},onError(){l({icon:"i-heroicons-x-circle",description:"Something went wrong.",id:"modal-error",color:"red"})},onClose(){f.close()}})},i=a=>{f.open(se,{pageTitle:h,event:a,onReloadTable(){t.fetchEvents()},onSuccess(){l({icon:"i-heroicons-check-circle",description:"Event updated.",id:"modal-success",color:"green"})},onError(){l({icon:"i-heroicons-x-circle",description:"Something went wrong.",id:"modal-error",color:"red"})},onNoDataChange(){l({icon:"i-heroicons-exclamation-circle",description:"No data changes detected.",id:"modal-warning",color:"yellow"})},onClose(){f.close()}})};return D(d,()=>{_.value=1,t.fetchEvents()}),D(b,()=>{_.value=1,t.fetchEvents()}),D([_,b],()=>{t.fetchEvents()}),D(C,()=>{_.value=1,t.fetchEvents()}),(a,n)=>{const u=K;return F(),ee("div",null,[o(u,{"module-title":e(p),columns:e(m),"action-items":e(s),"table-data":e(w),"add-data-modal":E,loading:e(S),"action-handlers":{edit:i},pagination:{page:e(_),pageCount:e(b),total:e(y)},sorting:e(r),search:e(d),"selected-dropdown-filter":e(C),"enable-dropdown-filter":!0,"dropdown-filter-options":e(v),"onUpdate:page":n[0]||(n[0]=g=>_.value=g),"onUpdate:pageCount":n[1]||(n[1]=g=>b.value=g),"onUpdate:sort":e(t).fetchEvents,"onUpdate:search":n[2]||(n[2]=g=>d.value=g),"onUpdate:selectedDropdownFilter":n[3]||(n[3]=g=>C.value=g)},null,8,["module-title","columns","action-items","table-data","loading","action-handlers","pagination","sorting","search","selected-dropdown-filter","dropdown-filter-options","onUpdate:sort"])])}}});export{De as default};
