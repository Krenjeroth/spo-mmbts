import{v as $,a4 as b,z as a}from"#entry";import{u as C}from"./bPUzXHqf.js";import{u as T,a as F,b as H}from"./BHpSMavt.js";const B=()=>{const i=C(),{apiUrl:n}=T(),l="permissions",o=$(()=>n(l));return $(()=>n(l+"-all")),{fetchPermissionsApi:async s=>await i(`${o.value}?${s.toString()}`),addPermissionApi:async s=>await i(`${o.value}`,{method:"POST",body:s}),updatePermissionApi:async(s,m)=>await i(`${o.value}/${s}`,{method:"PUT",body:m}),deletePermissionApi:async s=>await i(`${o.value}/${s}`,{method:"DELETE",headers:{Accept:"application/json"}}),fetchPermissionsAllApi:async()=>await i(`${o.value}-all`)}},O=b("permissionStore",()=>{const{fetchPermissionsApi:i,addPermissionApi:n,updatePermissionApi:l,deletePermissionApi:o,fetchPermissionsAllApi:f}=B(),{hasError:v,errorBag:h,transformValidationErrors:c,resetErrorBag:u}=F(),{strConvertSpaceToUnderscore:s}=H();let m;(e=>{e.ASC="asc",e.DESC="desc"})(m||(m={}));const A=a([]),y=a([]),t=a(!1),S=a(1),w=a(5),g=a(""),d=a({column:"created_at",direction:"desc"}),E=a(0),p=a("");return{permissions:A,permissionsAll:y,loading:t,errorBag:h,hasError:v,page:S,pageCount:w,search:g,sort:d,totalPermissions:E,selectedStatus:p,fetchPermissions:async()=>{t.value=!0;try{const e=new URLSearchParams({page:S.value.toString(),per_page:w.value.toString(),sort:d.value.column,order:d.value.direction,search:g.value,...p.value?{status:p.value}:{}}),r=await i(e);A.value=r.data,E.value=Number(r.meta.total)||0}catch(e){throw e}finally{t.value=!1}},addPermission:async e=>{t.value=!0,u();const r={title:s(e.title)};await n(r).catch(P=>{c(P)}).finally(()=>{t.value=!1})},updatePermission:async(e,r)=>{t.value=!0,u();const P={title:s(r.title)};await l(e,P).catch(U=>{c(U)}).finally(()=>{t.value=!1})},deletePermission:async e=>{t.value=!0,u(),await o(e).catch(r=>{c(r)}).finally(()=>{t.value=!1})},fetchPermissionsAll:async()=>{t.value=!0;try{const e=await f();y.value=e.data}catch(e){throw e}finally{t.value=!1}}}});export{O as u};
