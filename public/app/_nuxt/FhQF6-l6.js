import{v as $,a4 as b,z as l}from"#entry";import{u as C}from"./bPUzXHqf.js";import{u as P,a as T,b as F}from"./BHpSMavt.js";const H=()=>{const s=C(),{apiUrl:c}=P(),n="roles",r=$(()=>c(n)),p=$(()=>c(n+"-select"));return{fetchRolesApi:async t=>await s(`${r.value}?${t.toString()}`),addRoleApi:async t=>await s(`${r.value}`,{method:"POST",body:t}),updateRoleApi:async(t,d)=>await s(`${r.value}/${t}`,{method:"PUT",body:d}),deleteRoleApi:async t=>await s(`${r.value}/${t}`,{method:"DELETE",headers:{Accept:"application/json"}}),getRoleSelectApi:async()=>await s(`${p.value}`)}},N=b("roleStore",()=>{const{fetchRolesApi:s,addRoleApi:c,updateRoleApi:n,deleteRoleApi:r,getRoleSelectApi:p}=H(),{hasError:h,errorBag:S,transformValidationErrors:u,resetErrorBag:i}=T(),{capitalizeWords:R}=F();let t;(e=>{e.ASC="asc",e.DESC="desc"})(t||(t={}));const d=l([]),y=l([]),a=l(!1),A=l(1),g=l(5),w=l(""),v=l({column:"created_at",direction:"desc"}),E=l(0),m=l("");return{roles:d,roleSelect:y,loading:a,errorBag:S,hasError:h,page:A,pageCount:g,search:w,sort:v,totalRoles:E,selectedStatus:m,fetchRoles:async()=>{a.value=!0;try{const e=new URLSearchParams({page:A.value.toString(),per_page:g.value.toString(),sort:v.value.column,order:v.value.direction,search:w.value,...m.value?{status:m.value}:{}}),o=await s(e);d.value=o.data,E.value=Number(o.meta.total)||0}catch(e){throw e}finally{a.value=!1}},addRole:async e=>{a.value=!0,i();const o={...e,title:R(e.title)};await c(o).catch(f=>{u(f)}).finally(()=>{a.value=!1})},updateRole:async(e,o)=>{a.value=!0,i();const f={...o,title:R(o.title)};await n(e,f).catch(U=>{u(U)}).finally(()=>{a.value=!1})},deleteRole:async e=>{a.value=!0,i(),await r(e).catch(o=>{u(o)}).finally(()=>{a.value=!1})},getRoleSelect:async()=>{try{const e=await p();y.value=e.data}catch(e){console.log(e)}}}});export{N as u};
