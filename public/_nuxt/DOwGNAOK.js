import{_ as j,a as O,b as K}from"./XCtYQKhb.js";import{m as L}from"./C0hDUGdU.js";import{d as R,$ as k,z as $,v as M,e as z,o as F,w as u,g as s,a2 as A,X as e,ak as D,a3 as H,p as q,a6 as Q,Y as W,al as Z,I as E,c as ee}from"#entry";import{b as G}from"./CFo5vVrQ.js";import{u as te}from"./STx5ny5w.js";import{u as I}from"./CYZtsaz0.js";import{_ as P,a as X}from"./C8qUqt0S.js";import{_ as Y}from"./_9ZTpig7.js";import{_ as oe}from"./DKItBGiq.js";import{a as ne,b as ae}from"./JlTjpy1D.js";import"./SZpBFCWL.js";import"./Btqvjtym.js";import"./BfYD3bRy.js";import"./C-0eX2IW.js";import"./CBJ2e7Ro.js";import"./CXA8dOOg.js";import"./bFcEm6fe.js";import"./DpB_hE1g.js";import"./CJ5zKL8B.js";import"./DRvGcOf2.js";import"./bPUzXHqf.js";import"./Bgk1oRip.js";const se=R({__name:"CreateModal",props:{pageTitle:String},emits:["reloadTable","success","error","close"],setup(B,{emit:C}){const v=I(),{loading:h,errorBag:V,hasError:g}=k(v),n=C,t=B,{capitalizeAll:y}=G(),b=()=>n("close"),p=()=>{n("success"),n("reloadTable"),b()},f=()=>{n("error")},i=$({name:void 0,gender:void 0,municipality_id:void 0}),c=M({get:()=>i.value.name,set:d=>{i.value.name=y(d)}}),U=M({get:()=>i.value.gender,set:d=>{i.value.gender=d}}),S=async d=>{if(console.log(d.data),await v.addContestant(d.data),g.value){f();return}p()},T=$([{name:"test name",id:1},{name:"test name 2",id:2},{name:"test name 3",id:3}]);return(d,l)=>{const x=X,o=Y,r=oe,a=H,w=P,m=j;return F(),z(m,{"on-close":b,title:`Create ${t.pageTitle}`},{default:u(()=>[s(w,{schema:e(ne),state:e(i),onSubmit:A(S,["prevent"]),class:"space-y-6"},{default:u(()=>[s(o,{label:"Name",name:"name",error:e(V).name},{default:u(()=>[s(x,{modelValue:e(c),"onUpdate:modelValue":l[0]||(l[0]=_=>D(c)?c.value=_:null)},null,8,["modelValue"])]),_:1},8,["error"]),s(o,{label:"Gender"},{default:u(()=>[s(r,{modelValue:e(U),"onUpdate:modelValue":l[1]||(l[1]=_=>D(U)?U.value=_:null),options:["male","female"]},null,8,["modelValue"])]),_:1}),s(o,{label:"Municipality"},{default:u(()=>[s(r,{modelValue:e(i).municipality_id,"onUpdate:modelValue":l[2]||(l[2]=_=>e(i).municipality_id=_),options:e(T).map(_=>({label:_.name,value:_.id})),placeholder:"Select Municipality"},null,8,["modelValue","options"])]),_:1}),s(a,{type:"submit",loading:e(h)},{default:u(()=>[...l[3]||(l[3]=[q(" Add ",-1)])]),_:1},8,["loading"])]),_:1},8,["schema","state"])]),_:1},8,["title"])}}}),le=Object.assign(se,{__name:"ContestantsCreateModal"}),re=R({__name:"UpdateModal",props:{pageTitle:String,contestant:Object},emits:["reloadTable","success","error","noDataChange","close"],setup(B,{emit:C}){const v=I(),{loading:h,errorBag:V,hasError:g}=k(v),n=C,t=B,{capitalizeAll:y}=G(),b=()=>n("close"),p=()=>{n("success"),n("reloadTable"),b()},f=()=>{n("error")},i=()=>{n("noDataChange")},c=$({name:t.contestant?.name||void 0,gender:t.contestant?.gender||void 0,municipality_id:t.contestant?.municipality_id||void 0}),U=$({...O.cloneDeep({name:t.contestant?.name||void 0,gender:t.contestant?.gender||void 0,municipality_id:t.contestant?.municipality_id||void 0})}),S=["name","gender","municipality_id"],T=M(()=>S.some(o=>{const r=c.value[o],a=U.value[o];return!O.isEqual(r,a)})),d=M({get:()=>c.value.name,set:o=>{c.value.name=y(o)}}),l=M({get:()=>c.value.gender,set:o=>{c.value.gender=o}}),x=async o=>{if(!T.value){i();return}if(await v.updateContestantById(t.contestant?.id,o.data),g.value){f();return}p()};return(o,r)=>{const a=X,w=Y,m=H,_=P,J=j;return F(),z(J,{"on-close":b,title:`Update ${t.pageTitle}`},{default:u(()=>[s(_,{schema:"UpdateContestantValidationSchema"in o?o.UpdateContestantValidationSchema:e(ae),state:e(c),onSubmit:A(x,["prevent"]),class:"space-y-6"},{default:u(()=>[s(w,{label:"Name",name:"name",error:e(V).name},{default:u(()=>[s(a,{modelValue:e(d),"onUpdate:modelValue":r[0]||(r[0]=N=>D(d)?d.value=N:null)},null,8,["modelValue"])]),_:1},8,["error"]),s(w,{label:"Gender",name:"gender",error:e(V).gender},{default:u(()=>[s(a,{modelValue:e(l),"onUpdate:modelValue":r[1]||(r[1]=N=>D(l)?l.value=N:null)},null,8,["modelValue"])]),_:1},8,["error"]),s(m,{type:"submit",loading:e(h),disabled:!e(T)},{default:u(()=>[...r[2]||(r[2]=[q(" Update ",-1)])]),_:1},8,["loading","disabled"])]),_:1},8,["schema","state"])]),_:1},8,["title"])}}}),ie=Object.assign(re,{__name:"ContestantsUpdateModal"}),$e=R({__name:"index",setup(B){const C=Q();W({title:()=>C.meta.title});const{strSingular:v}=G(),h=v(C.meta.title),V=C.meta.title,g=Z(),{actionToastResult:n}=te(),t=I(),{contestants:y,loading:b,page:p,pageCount:f,search:i,sort:c,totalContestants:U,selectedStatus:S}=k(t),{columns:T,items:d,statusOptions:l}=L;t.fetchContestants();const x=()=>{g.open(le,{pageTitle:h,onReloadTable(){t.fetchContestants()},onSuccess(){n({icon:"i-heroicons-check-circle",description:"User created.",id:"modal-success",color:"green"})},onError(){n({icon:"i-heroicons-x-circle",description:"Something went wrong.",id:"modal-error",color:"red"})},onClose(){g.close()}})},o=r=>{g.open(ie,{pageTitle:h,contestant:r,onReloadTable(){t.fetchContestants()},onSuccess(){n({icon:"i-heroicons-check-circle",description:"User updated.",id:"modal-success",color:"green"})},onError(){n({icon:"i-heroicons-x-circle",description:"Something went wrong.",id:"modal-error",color:"red"})},onNoDataChange(){n({icon:"i-heroicons-exclamation-circle",description:"No data changes detected.",id:"modal-warning",color:"yellow"})},onClose(){g.close()}})};return E(i,()=>{p.value=1,t.fetchContestants()}),E(f,()=>{p.value=1,t.fetchContestants()}),E([p,f],()=>{t.fetchContestants()}),E(S,()=>{p.value=1,t.fetchContestants()}),(r,a)=>{const w=K;return F(),ee("div",null,[s(w,{"module-title":e(V),columns:e(T),"action-items":e(d),"table-data":e(y),"add-data-modal":x,loading:e(b),"action-handlers":{edit:o},pagination:{page:e(p),pageCount:e(f),total:e(U)},sorting:e(c),search:e(i),"selected-dropdown-filter":e(S),"enable-dropdown-filter":!0,"dropdown-filter-options":e(l),"onUpdate:page":a[0]||(a[0]=m=>p.value=m),"onUpdate:pageCount":a[1]||(a[1]=m=>f.value=m),"onUpdate:sort":e(t).fetchContestants,"onUpdate:search":a[2]||(a[2]=m=>i.value=m),"onUpdate:selectedDropdownFilter":a[3]||(a[3]=m=>S.value=m)},null,8,["module-title","columns","action-items","table-data","loading","action-handlers","pagination","sorting","search","selected-dropdown-filter","dropdown-filter-options","onUpdate:sort"])])}}});export{$e as default};
